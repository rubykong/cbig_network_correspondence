{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"cbig_network_correspondence","text":"<p>Documentation: https://rubykong.github.io/cbig_network_correspondence</p> <p>Source Code: https://github.com/rubykong/cbig_network_correspondence</p> <p>PyPI: https://pypi.org/project/cbig_network_correspondence/</p> <p>This toolbox was used to explore the network correspondence between networks across different atlases. </p>"},{"location":"#installation","title":"Installation","text":""},{"location":"#python-installation","title":"Python installation","text":"<p>Check here for how to install python: https://realpython.com/installing-python/</p>"},{"location":"#conda-environment","title":"Conda environment","text":"<p>We provide NCT python environment here: NCT_env. You can create a conda environment using the following command:</p> <pre><code>conda env create -f NCT_env.yml\n</code></pre> <p>To use this environment, activate the environment using the following command:</p> <pre><code>conda activate NCT_env\n</code></pre>"},{"location":"#nct-installation","title":"NCT installation","text":"<p>To install:</p> <pre><code>pip install cbig_network_correspondence\n</code></pre> <p>To upgrade:</p> <pre><code>pip install --upgrade cbig_network_correspondence\n</code></pre> <p>If you don't have pip installed, this pip installation can guide you through the process.</p>"},{"location":"#usage","title":"Usage","text":""},{"location":"#quick-example","title":"Quick Example!","text":"<p>Test the toolbox quickly using the example data! Check the last section in Usage.ipynb for the results.</p> <pre><code>import cbig_network_correspondence as cnc\n\natlas_names_list = [\"EG17\",\"MG360J12\"]\nexample = cnc.load_example\n# the example config file\nprint(example.example_config)\n# the path to the example data\nprint(example.example_nii)\nref_params = cnc.compute_overlap_with_atlases.DataParams(example.example_config, example.example_nii)\ncnc.compute_overlap_with_atlases.network_correspondence(ref_params, atlas_names_list,\"~/NCTexample/example_results\")\n\n</code></pre>"},{"location":"#tutorial","title":"Tutorial","text":"<p>We provide a tutorial for how to use this toolbox. The tutorial is available in the Usage.ipynb notebook: + Usage.ipynb</p>"},{"location":"#atlases-we-included","title":"Atlases we included","text":"<p>Check this list for the atlases we have included. We use abbreviations for the atlases. Here we provide the decription for each atlas. If you want us to include your atlas, please contact me (roo.cone@gmail.com).</p> Abbreviation Source Description MG360J12 Glasser2016; Ji2019 Mattew Glasser2016 360-ROI with Ji2019 12 Cole-Anticevic networks HCPICA Smith2009; Smith2013 HCP 25-node ICA maps AL20 Laird2011 Angela Laird2011 20-node ICA maps AS200K17 Schaefer2018; Kong2021 Alex Schaefer2018 200-ROI with Kong2021 17 networks AS200Y17 Schaefer2018; Yeo2011 Alex Schaefer2018 200-ROI with Yeo2011 17 networks AS400K17 Schaefer2018; Kong2021 Alex Schaefer2018 400-ROI with Kong2021 17 networks AS400Y17 Schaefer2018; Yeo2011 Alex Schaefer2018 400-ROI with Yeo2011 17 networks XS268_8 Shen2013 Xilin Shen2013 268-ROI with 8 networks XS368_8 Shen2013 Xilin Shen2013 368-ROI with 8 networks WS90_14 Shirer2012 William Shirer2012 90-ROI 14 networks UKBICA Smith2009; Alfaro-Almagro2018 UKBiobank 25-node ICA maps EG286_12 Power2011; Gordon2016 Evan Gordon2016 286-ROI with 12 networks TL12 Power2011; Laumann2015 Tim Laumann2015 12 networks (Power2011) EG17 Power2011; Gordon2017 Evan Gordon2017 17 networks TY7 Yeo2011 Thomas Yeo 7 networks TY17 Yeo2011 Thomas Yeo 17 networks XY200K17 Yan2023; Kong2021 Xiaoxuan Yan2023 200-ROI with Kong2021 17 networks XY200Y17 Yan2023; Yeo2011 Xiaoxuan Yan2023 200-ROI with Yeo2011 17 networks XY400K17 Yan2023; Kong2021 Xiaoxuan Yan2023 400-ROI with Kong2021 17 networks XY400Y17 Yan2023; Yeo2011 Xiaoxuan Yan2023 400-ROI with Yeo2011 17 networks EG5 Gordon2023 Evan Gordon2023 5 networks TW_TASK_NETS Woodward2024 Todd Woodward 2024 12 Task-based Networks DU15NET Du2024 Jingnan Du2024 15 networks <p>These atlases should be automatically downloaded when you install the toolbox. If you want to download the atlases manually, you can find the atlases here: https://github.com/rubykong/cbig_network_correspondence_data. The atlas data will be automatically downloaded in your python package directory: <code>cbig_network_correspondence/src/cbig_network_correspondence/data</code>.</p>"},{"location":"#input-data","title":"Input data","text":"<p>The toolbox can also explore the network correspondence of your own input data. The input data can be different format. We support input data in fs_LR_32k, fsaverage6, and FSLMNI2mm.</p>"},{"location":"#format","title":"Format","text":"<p>Here are the formats we support:</p> <p>For data in fs_LR_32k or fsaverage6 space:</p> <ul> <li> <p><code>.mat</code> file: The file should contain two variables starting with <code>lh</code> and <code>rh</code>. For example, the variable names could be <code>lh_data</code>, <code>rh_data</code> or <code>lh_labels</code>, <code>rh_labels</code>. Each variable should be a 32492x1 vector for <code>fs_LR_32k</code> space or a 40962x1 vector for <code>fsaverage6</code> space. </p> </li> <li> <p><code>.npy</code> file: The file should contain a numpy array with shape (64984, 1) for <code>fs_LR_32k</code> space or (81924, 1) for <code>fsaverage6</code> space.</p> </li> </ul> <p>For data in FSLMNI2mm space:</p> <ul> <li><code>.nii</code> or <code>.nii.gz</code> file: The file should be a nifti file with the same dimension as the FSL MNI152 2mm template.</li> </ul>"},{"location":"#pass-in-the-data-as","title":"Pass in the data as ...","text":"<ul> <li>A single path to a single file</li> <li><code>/data_dir/my_task_contrast_map.mat</code></li> <li><code>/data_dir/my_task_contrast_map.npy</code></li> <li> <p><code>/data_dir/my_task_contrast_map.nii.gz</code></p> </li> <li> <p>A list of paths to multiple files</p> </li> <li><code>['/data_dir/my_task_contrast_map1.mat', '/data_dir/my_task_contrast_map2.mat']</code></li> <li><code>['/data_dir/my_task_contrast_map1.npy', '/data_dir/my_task_contrast_map2.npy']</code></li> <li> <p><code>['/data_dir/my_task_contrast_map1.nii.gz', '/data_dir/my_task_contrast_map2.nii.gz']</code></p> </li> <li> <p>A directory contains the input files</p> </li> <li> <p><code>/data_dir</code>   under this directory, the toolbox will search for the files containing the <code>Data_Name</code> in the config file (see the Config file section for more details). For example, if the <code>Data_Name</code> is <code>my_task_contrast_map</code>, the toolbox will search for the files containing <code>my_task_contrast_map</code> in the file name</p> </li> <li> <p>A string indicating the name of a existing atlas</p> </li> <li><code>AS400Y17</code></li> <li><code>EG17</code></li> <li><code>TY17</code></li> </ul>"},{"location":"#reference-data-space","title":"Reference data space","text":"<p>To explore the network correspondence between a given input data and existing atlases, the toolbox will use the input data as the reference data. The toolbox will use existing atlases in the same space as the input data. For example, if the input data is in <code>fs_LR_32k</code> space, the toolbox will use the existing atlases in <code>fs_LR_32k</code> space. If the input data is in <code>FSLMNI2mm</code> space, the toolbox will use the existing atlases in <code>FSLMNI2mm</code> space. </p>"},{"location":"#reference-data-names","title":"Reference data names","text":"<p>User can specify the name for the given input data, if not, the toolbox will use the <code>Data_Name</code> in the config file as the reference data name. </p> <p>Reference data names could be important for a multi-dimension input data. For example, if the input data is a set of task contrast maps, the user might want to specify the reference data names for each task contrast map. Otherwise, the toolbox will name each task contrast map as <code>&lt;Data_Name&gt;1</code>, <code>&lt;Data_Name&gt;2</code>, etc. </p> <p>If the input data is the user's own atlas with K networks, the user should specify the reference data names for each network. Otherwise the toolbox will name each network as <code>&lt;Data_Name&gt;1</code>, <code>&lt;Data_Name&gt;2</code>, etc.</p>"},{"location":"#config-file","title":"Config file","text":"<p>In this toolbox, the information for each atlas or input data is constructed as a config file. We have included the config files for existing atlases. The config files will be automatically downloaded when you install the toolbox. If you want to check the config files manually, you can find the config files in your python package directory: <code>cbig_network_correspondence/src/cbig_network_correspondence/data/atlas_config</code>. If you want to explore network correspondence of your own input data/atlas, you can create your own config file, check next sections for how to create a config file. </p> <p>The config file should be a text file. </p> <p>Here is an example of the config file for the Schaefer 400-ROI atlas with Yeo 17-network network assignemnt <code>AS400Y17</code>:</p> <pre><code>[data_info]\nData_Category: YeoLab\nData_Name: AS400Y17\nData_Space: fsaverage6\nData_Type: Hard\nData_NetworkAssignment: 1\n</code></pre> <p>Here is an example of the config file for a example metric data <code>Example</code>:</p> <pre><code>[data_info]\nData_Name: Example\nData_Space: FSLMNI2mm\nData_Type: Metric\nData_Threshold: [5,Inf]\n</code></pre> <p>Here is the decription for the config file:</p> <ul> <li><code>Data_Category</code> [optional]</li> </ul> <p>We included it for existing atlases because some atlases were from the same lab. In this case, we put the some atlases into the same category. This is not necessary for your own atlas or your own metric data.</p> <ul> <li><code>Data_Name</code></li> </ul> <p>The name of the atlas or metric data. If the input data is a set of files instead of a single file, user can pass in the directory to the files. The toolbox will search for the files containing the <code>Data_Name</code> in the file name. For example, if the <code>Data_Name</code> is <code>my_task_contrast_map</code>, the toolbox will search for the files containing <code>my_task_contrast_map</code> in the file name.</p> <ul> <li><code>Data_Space</code></li> </ul> <p>The space name of the space where the atlas/data is in. It can be a surface name or a volumetric space name. We currenly have atlases in the following spaces: <code>fs_LR_32k</code> surface space, <code>fsaverage6</code> surface space, <code>FSLMNI2mm</code> volumetric space, <code>LairdColin2mm</code> volumetric space, <code>ShenColin1mm</code> volumetric space. If the user wants to explore the network correspondence of their own data, the data should be in <code>fs_LR_32k</code>, <code>fsaverage6</code>, or <code>FSLMNI2mm</code> space.</p> <ul> <li><code>Data_Type</code></li> </ul> <p>The type of the atlas/data. We have two types of atlas: <code>Hard</code> and <code>Soft</code>. The <code>Hard</code> atlas is the atlas that each ROI is assigned to a specific network. The <code>Soft</code> atlas is the atlas that each ROI is assigned to a probability of belonging to each network. We also allow for a metric data such as task contrast maps or probability maps, in this case <code>Data_Type</code> should be <code>Metric</code>. </p> <ul> <li><code>Data_NetworkAssignment</code> [optional]</li> </ul> <p>Sometimes the atlas has fine-grained ROIs and these ROIs were assigned to large-scale networks. For example, the Schaefer2018 400 ROIs were assigned to the Yeo 17-network atlas. In this case the user can provide a mapping between ROIs to networks, here you can find the mapping for some of the existing atlases: https://github.com/rubykong/cbig_network_correspondence_data/tree/master/network_assignment</p> <ul> <li><code>Data_Threshold</code> [optional]</li> </ul> <p>For soft parcellation and metric data, we will need to apply a threshold to binarize the data. The threshold should be set as <code>[lower bound, upper bound]</code>. If the upper bound is <code>Inf</code>, then the threshold will be applied as <code>&gt;= lower bound</code>. If the lower bound is <code>-Inf</code>, then the threshold will be applied as <code>&lt;= upper bound</code>. If the <code>Data_Type</code> is <code>Soft</code> or <code>Metric</code>, but the <code>Data_Threshold</code> is not provided, the toolbox will use a default threshold <code>[0, Inf]</code>. <code>Data_Threshold</code> is not necessary for <code>Hard</code> atlas.</p> <p>After importing the toolbox, here are the relevant commands. After decribing the commands, we provide examples for how to use this toolbox. We also provided a jupyter notebook for the usage examples: Usage.ipynb. </p>"},{"location":"#usage-scenarios","title":"Usage scenarios","text":"<p>This toolbox has two main usage scenarios:</p> <ol> <li>Use this toolbox to explore network correspondence between existing atlases.</li> <li>Provide users' own input data, and explore the network correspondence between the input data and existing atlases.</li> </ol> <p>We have provided detailed examples for each usage scenario in the Usage.ipynb notebook. Here we provide brief descriptions for inputs.</p>"},{"location":"#1-explore-network-correspondence-between-existing-atlases","title":"1. Explore network correspondence between existing atlases","text":"<pre><code>import cbig_network_correspondence as cnc\n\ncnc.compute_overlap_with_atlases.network_correspondence(reference_atlas, atlas_names_list, output_dir)\n</code></pre> <ul> <li><code>reference_atlas</code>: str</li> <li>The name of the reference atlas. The reference atlas should be one of the existing atlases. The toolbox will use the reference atlas to explore the network correspondence between the reference atlas and other atlases in the <code>atlas_names_list</code>.</li> <li><code>atlas_names_list</code>: list</li> <li>A list of the names of the atlases. The toolbox will explore the network correspondence between the reference atlas and the atlases in the <code>atlas_names_list</code>.</li> <li><code>output_dir</code>: str</li> <li>The directory to save the output figures and csv files.</li> </ul> <p>Note: network name should be the abbreviation of the atlas. For example, <code>AS400Y17</code> for the Schaefer 400-ROI atlas with Yeo 17-network network assignemnt.</p>"},{"location":"#2-explore-network-correspondence-between-input-data-and-existing-atlases","title":"2. Explore network correspondence between input data and existing atlases","text":"<pre><code>import cbig_network_correspondence as cnc\n\n# construct DataParams object based on the data file path and config\nref_params = cnc.compute_overlap_with_atlases.DataParams(config, file_path)\n\n# compute the overlap with atlases and save the results\ncnc.compute_overlap_with_atlases.network_correspondence(ref_params, atlas_names_list,output_dir,ref_data_names)\n\n</code></pre> <ul> <li><code>config</code>: str</li> <li>The path to the config file for the input data.</li> <li><code>file_path</code>: str/list</li> <li>The path to a single input data file</li> <li>A list of paths to multiple input data files</li> <li>A directory contains the input data files</li> <li><code>atlas_names_list</code>: list</li> <li>A list of the names of the atlases. The toolbox will explore the network correspondence between the input data and the atlases in the <code>atlas_names_list</code>.</li> <li><code>output_dir</code>: str</li> <li>The directory to save the output figures and csv files.</li> <li><code>ref_data_names</code>: str/list</li> <li>The name of the input data. If <code>ref_data_names</code> is not provided, the toolbox will use the <code>Data_Name</code> in the config file as the reference data name. If the input data is multi-dimension, each dimension will be named as <code>&lt;Data_Name&gt;1</code>, <code>&lt;Data_Name&gt;2</code>,... if the <code>ref_data_names</code> is not provided.</li> </ul>"},{"location":"#significance-test","title":"Significance test","text":"<p>The toolbox provides a significance test to test the significance of the network correspondence between the given input data and an existing atlas. The toolbox will use the spin-test (Gordon2017;Alexander-Bloch2018)to test the significance of the network correspondence. Specically, SpinPermutations from BrainSpace python package is used here. For data in FSLMNI2mm space, we project the data to the fsaverage6 space for the spin-test. </p>"},{"location":"#results","title":"Results","text":"<p>NCT provides different types of plots to help the user explore/visualize the network correspondences. </p> <ul> <li>Overlap Heatmap</li> <li> <p>If input data has multiple dimensions, e.g., a atlas with K networks, a set of task contrast maps. For a specified list of existing atlases, the toolbox will provide heatmaps to show the overlap between the input data and the existing atlases. Each atlas will have a heatmap. If input data has K dimension, and the other atlas has N networks, the heatmap will be a KxN heatmap. Each row represents the overlap between the input data and an existing atlas. Each column represents the overlap between the input data and a network in the existing atlas. The color represents the overlap value. The asterisk indicates the significance of the overlap. </p> </li> <li> <p>Network Clock</p> </li> <li> <p>If input data is single dimension, e.g., a task contrast map, a probability map. For a specified list of existing atlases, the toolbox will provide a network clock to show the overlap between the input data and the existing atlases. The network clock will show the overlap between the input data and all networks. Networks from the same atlas are grouped together and colored by the same color. Only the networks with significant overlap will be indicated by network name in the network clock. The clock ring represents the overlap value. The network font size represents the overlap value. </p> </li> <li> <p>Network Radar</p> </li> <li> <p>If input data is single dimension, e.g., a task contrast map, a probability map. For a specified list of existing atlases, the toolbox will provide a network radar to show the overlap between the input data and the existing atlases. Each atlas will have a radar map. The asterisk indicates the significance of the overlap.</p> </li> <li> <p>Summary Table</p> </li> <li>The toolbox will provide a summary table to show the exact overlap values and p-values of the overlap between the input data and the existing atlases. Summary tables will be saved as figures and csv files.</li> </ul>"},{"location":"#development","title":"Development","text":"<ul> <li>Clone this repository</li> <li>Requirements:</li> <li>Poetry</li> <li>Python 3.9+</li> <li>Create a virtual environment and install the dependencies</li> </ul> <pre><code>poetry install\n</code></pre> <ul> <li>Activate the virtual environment</li> </ul> <pre><code>poetry shell\n</code></pre> <p>This project was generated using the wolt-python-package-cookiecutter template.</p>"},{"location":"api_docs/","title":"API documentation","text":""},{"location":"changelog/","title":"Changelog","text":"<p>All notable changes to this project will be documented in this file.</p> <p>The format is based on Keep a Changelog, and this project adheres to Semantic Versioning.</p>"},{"location":"changelog/#unreleased","title":"Unreleased","text":""},{"location":"changelog/#033-2025-02-14","title":"0.3.3 - 2025-02-14","text":""},{"location":"changelog/#fixed","title":"Fixed","text":"<ul> <li>we fixed a bug relating to re-sorting projected files when computing pvalues</li> </ul>"},{"location":"changelog/#032-2025-02-12","title":"0.3.2 - 2025-02-12","text":""},{"location":"changelog/#fixed_1","title":"Fixed","text":"<ul> <li>We fixed a bug where the input data will be binarized again when computing pvalue for soft or metric data in MNI 2mm</li> </ul>"},{"location":"changelog/#031-2024-10-14","title":"0.3.1 - 2024-10-14","text":""},{"location":"changelog/#fixed_2","title":"Fixed","text":"<ul> <li>Fixed a minor bug for spin rotation number</li> </ul>"},{"location":"changelog/#030-2024-10-10","title":"0.3.0 - 2024-10-10","text":""},{"location":"changelog/#fixed_3","title":"Fixed","text":"<ul> <li>We fixed bugs in interpolation method for hard parcellation</li> </ul>"},{"location":"changelog/#added","title":"Added","text":"<ul> <li>release atlases from Gordon2024, Woodward2024, Du2024</li> </ul>"},{"location":"changelog/#021-2024-06-11","title":"0.2.1 - 2024-06-11","text":""},{"location":"changelog/#added_1","title":"Added","text":"<ul> <li>Upgrade pakcgaes to latest versions</li> <li>release python env file</li> </ul>"},{"location":"changelog/#020-2024-04-04","title":"0.2.0 - 2024-04-04","text":""},{"location":"changelog/#added_2","title":"Added","text":"<ul> <li>Usage example and readme files are available</li> </ul>"},{"location":"changelog/#014-2024-03-30","title":"0.1.4 - 2024-03-30","text":""},{"location":"changelog/#added_3","title":"Added","text":"<ul> <li>Now we can use a single command to generate everything</li> <li>Usage example and readme files are available</li> </ul>"},{"location":"changelog/#013-2024-03-26","title":"0.1.3 - 2024-03-26","text":""},{"location":"changelog/#fixed_4","title":"Fixed","text":"<ul> <li>We fixed bugs in visualization scripts</li> </ul>"},{"location":"changelog/#012-2024-03-15","title":"0.1.2 - 2024-03-15","text":""},{"location":"changelog/#added_4","title":"Added","text":"<ul> <li>we add a new feature to perform permutation test for overlap</li> <li>we allow for perform network correspondence with a given input data</li> <li>a better circular chart visualization and spider plot and summary table are provided</li> </ul>"},{"location":"changelog/#011-2023-05-22","title":"0.1.1 - 2023-05-22","text":""},{"location":"changelog/#added_5","title":"Added","text":"<ul> <li>we added yan2023 homotopic atlases</li> <li>add webpage for documentation</li> </ul>"},{"location":"changelog/#010-2023-04-18","title":"0.1.0 - 2023-04-18","text":""},{"location":"changelog/#added_6","title":"Added","text":"<ul> <li>Examples and description for how to use the toolbox</li> </ul>"},{"location":"changelog/#0011-2023-04-18","title":"0.0.11 - 2023-04-18","text":""},{"location":"changelog/#fixed_5","title":"Fixed","text":"<ul> <li>import error for debugging purpose and add templates</li> </ul>"},{"location":"changelog/#0010-2023-04-18","title":"0.0.10 - 2023-04-18","text":""},{"location":"changelog/#added_7","title":"Added","text":"<ul> <li>visualization scripts to visualize overlap data in surface or volume</li> <li>documentation in readme</li> </ul>"},{"location":"changelog/#fixed_6","title":"Fixed","text":"<ul> <li>import error</li> </ul>"},{"location":"changelog/#009-2023-04-17","title":"0.0.9 - 2023-04-17","text":""},{"location":"changelog/#added_8","title":"Added","text":"<ul> <li>we add the scripts to compute network correspondence between atlases</li> <li>we provide scripts to output the overlap data</li> </ul>"},{"location":"changelog/#fixed_7","title":"Fixed","text":"<ul> <li>we fix and release the changelog</li> </ul>"}]}